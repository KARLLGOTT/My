<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="entry.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Aibolit/entry</title>
    <link rel="shortcut icon" href="img/Combined Shape.png" type="image/x-icon">
    <!-- <script src="https://code.jquery.com/jquery-2.2.4.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.maskedinput/1.4.1/jquery.maskedinput.min.js"></script> -->
</head>

<body>
    <header class="line">
        <img class="logo" src="img/Combined Shape.png" alt="logo">
        <ul class="ul-links">
            <li style="padding-left: 0px;"><a id="cabinet" class="links" href="#">ЛИЧНЫЙ КАБИНЕТ</a></li>
            <li class="links dropdown">
                <button class="dropbtn">О НАС</button>
                <div class="dropdown-content">
                    <a href="therapy.html#5">Услуги и цены</a>
                    <a href="team.html">Коллектив</a>
                    <a href="history.html">История компании</a>
                </div>
            </li>
            <li><a class="links" href="news.html">НОВОСТИ И АКЦИИ</a></li>
            <li><a class="links"" href=" contacts.html">КОНТАКТЫ</a></li>
            <li><a class=" links" href="blog.html">БЛОГ</a></li>
        </ul>

        <span id="openDialog" class="town"><input id="city" class="town-main" value="ВАШ ГОРОД" readonly></span>
    </header>
    <main class="main">
        <div id="block1" class="bl1">
            <div class="back">
                <img style="transform: rotate(180deg); margin-top: -5px;" src="img/ic_arrow.png" alt="arrow">
                <a style="cursor: url(img/Hand.png), auto; text-decoration: none;" href="index.html"><span
                        class="link-history">НАЗАД</span></a>
            </div>
            <div style="margin-top: 61px; margin-left: 230px;">
                <div class="entry-h">
                    Запись на прием
                </div>
                <div id="enterModal" class="dial">
                    <span class="inp">Онлайн-консультация</span>
                    <div style="margin-top: 31px;">2000 ₴</div>
                </div>
                <dialog>
                    <span class="close" id="closeDialog">X</span>
                    <h3 class="enter">Вход или
                        регистрация</h3>

                    <input type="tel" id="phone" name="phone" autocorrect="off" autocapitalize="off" required
                        class="form-control tel-modal " placeholder="+38(000) 000-00-00" data-phone-pattern
                        data-phone-clear="false" value="">

                    <button id="furt" type="submit" class="further proceed-btn" disabled><a class="p-btn"
                            style="cursor: url(img/Hand.png), auto;" href="#">ДАЛЕЕ</a></button>
                    <a id="no-reg" class="no-reg" href="#">ПРОДОЛЖИТЬ БЕЗ РЕГИСТРАЦИИ</a>
                </dialog>
                <div class="dial dial2">
                    <span class="inp inp2">Прием в клинике</span>
                    <div style="margin-top: 31px;">Бесплатно</div>
                </div>
            </div>
        </div>
        <div id="block2" class="bl2">
            <div class="back">
                <img style="transform: rotate(180deg); margin-top: -5px;" src="img/ic_arrow.png" alt="arrow">
                <a style="cursor: url(img/Hand.png), auto; text-decoration: none;" href="index.html"><span
                        class="link-history">НАЗАД</span></a>
            </div>
            <div class="entryH">
                <div class="entry-h">
                    Оформление заказа
                </div>
                <form action="#" method="post" target="_blank">
                    <label for="validationDefault01" class="form-label"></label>
                    <input type="text" class="form-control dial inp inp3" id="validationDefault01" placeholder="ФИО"
                        required>
                    <label for="validationDefault02" class="form-label"></label>

                    <input type="tel" autocorrect="off" autocapitalize="off" class="form-control dial inp inp4"
                        id="validationDefault02" placeholder="+38(000) 000 00 00" data-phone-pattern
                        data-phone-clear="false" required="">

                    <label for="validationDefault03" class="form-label"></label>
                    <input type="tel" class="form-control dial inp inp4 inp5" id="validationDefault03"
                        placeholder="Желаемая дата и время приема" required>
                    <textarea class="form-control dial inp inp6" placeholder="Кратко опишите проблему"
                        id="floatingTextarea2" style="height: 131px"></textarea>
                    <label for="floatingTextarea2"></label>
                </form>
                <div id="bank" class="foot-form">
                    <form action="#" method="post" target="_blank">
                        <input id="bank" type="number" class="credit" placeholder="Оплата банковской картой" required>
                    </form>
                    <p class="form-p">Ваши личные данные будут использоваться для обработки ваших заказов, упрощения
                        вашей работы с сайтом и для других целей, описанных в нашей политика конфиденциальности.</p>
                    <button id="pay" type="submit" class="proceed-btn" disabled><a class="p-btn"
                            style="cursor: url(img/Hand.png), auto;" href="#enroll"
                            onclick="return false">ОПЛАТИТЬ</a></button>
                </div>
                <button id="enroll" type="submit" class="proceed-btn proceed-btn2"><a class="p-btn"
                        style="cursor: url(img/Hand.png), auto;" href="Personal area.html">ЗАПИСАТЬСЯ</a></button>
            </div>
        </div>
    </main>

    <footer class="foot">
        <img class="foot-logo" src="img/Subtract.png" alt="logo">
        <div class="text-foot">
            <h3 class="foot-h">Айболит</h3>
            <p class="foot-p">ветеринарная клиника</p>
        </div>
        <a class="links-foot" href="#">
            <div class="text-foot politic">
                Политика<br>
                конфиденциальности в<br>
                отношении обработки<br>
                персональных данных
            </div>
        </a>
        <div class="links-foot2">
            <a class="links-foot text-foot" href="index.html">Главная</a>
            <a class="links-foot text-foot" href="therapy.html#5">Услуги и цены</a>
            <a class="links-foot text-foot" href="history.html">История компании</a>
            <a class="links-foot text-foot" href="team.html#2">Наши специалисты</a>
            <a class="links-foot text-foot" href="#">Вакансии</a>
            <a class="links-foot text-foot" href="#">Реквизиты</a>
            <a class="links-foot text-foot" href="#">Онлайн-оплата</a>
        </div>
        <div class="links-foot2 links-foot3">
            <a class="links-foot text-foot" href="#">Отзывы</a>
            <a class="links-foot text-foot" href="contacts.html">Контакты</a>
            <a class="links-foot text-foot" href="#">Груминг-саллон</a>
            <a class="links-foot text-foot" href="#">Косметика</a>
            <a class="links-foot text-foot" href="news.html">Новости и акции</a>
            <a class="links-foot text-foot" href="blog.html">Блог</a>
        </div>
        <div class="app2">
            <a href="#"><img src="img/Group 5 (2).png" alt="app store"></a>
            <a href="#"><img src="img/google-play-badge.png" alt="app store"></a>
        </div>
        <div class="icon2">
            <a style="cursor: url(img/Hand.png), auto;padding-right: 50px;" href="https://www.instagram.com/"><img
                    id="inst" src="img/inst (3).png" alt="instagram"></a>
            <a style="cursor: url(img/Hand.png), auto;padding-right: 50px;" href="https://ru-ru.facebook.com/"><img
                    id="fb" src="img/fb (3).png" alt="facebook"></a>
            <a style="cursor: url(img/Hand.png), auto;padding-right: 50px;" href="https://vk.com/"><img id="vk"
                    src="img/vk (3).png" alt="vk"></a>
            <a style="cursor: url(img/Hand.png), auto;" href="https://www.youtube.com/"><img id="youtube"
                    src="img/youtube (3).png" alt="youtube"></a>
        </div>
        <div class="text-foot email">
            aibolit34.ru<br>
            aibolit34@gmail.com
        </div>
        <div class="text-foot made">
            Made with&emsp;&ensp;from UnitBean
            <img class="heart" src="img/whatsapp-black-heart-emoji-11550121966iibkpdanml.png" alt="heart">
        </div>
    </footer>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close2">&times;</span>
            <h3 class="enter-dialog">Вход или<br>
                регистрация</h3>

            <input type="tel" id="tel" name="phone" autocorrect="off" autocapitalize="off" required
                class="form-control tel-modal2" data-phone-pattern data-phone-clear="false"
                placeholder="+38(000) 000 00 00">
            <button id="fur" type="submit" class="further3 proceed-btn3" disabled><a class="p-btn3"
                    style="cursor: url(img/Hand.png), auto;" href="#">ДАЛЕЕ</a></button>
        </div>
    </div>
    <div id="myModal2" class="modal">
        <div class="modal-content modal-content2">
            <span id="span" class="close3">&times;</span>
            <h3 class="enter-dialog">Вход или<br>
                регистрация</h3>
            <div id="num" style="margin-left: 64px;">
                <input type="number" name="number" class="form-control num" maxlength="1">
                <input type="number" name="number" class="form-control num" maxlength="2">
                <input type="number" name="number" class="form-control num" maxlength="3">
                <input type="number" name="number" class="form-control num" maxlength="4">
            </div>
            <div id="deadline-message" class="deadline-message">
                <a href="#">Отправить повторно</a>
            </div>
            <div id="countdown" class="countdown">
                <div class="countdown-number">
                    <span class="minutes countdown-time"></span>
                    <span></span>
                </div>
                <div class="countdown-number">
                    <span class="minutes countdown-time"></span>
                    <span>:</span>
                </div>
                <div class="countdown-number">
                    <span class="seconds countdown-time"></span>
                    <span></span>
                </div>
            </div>
            <button id="fur2" type="submit" class="further3 proceed-btn3" disabled><a class="p-btn3"
                    style="cursor: url(img/Hand.png), auto;" href="Personal area.html">ГОТОВО</a></button>
            <div id="back-back" class="back2"><a href="index.html">НАЗАД</a></div>
        </div>
    </div>

    <script>
        // Get the modal
        let modal = document.getElementById("myModal");

        // Get the button that opens the modal
        let btn = document.getElementById("cabinet");

        // Get the <span> element that closes the modal
        let span = document.getElementsByClassName("close2")[0];

        // When the user clicks the button, open the modal 
        btn.onclick = function () {
            modal.style.display = "block";
        }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }

    </script>

    <script>
        // Get the modal
        let modal2 = document.getElementById("myModal2");

        // Get the button that opens the modal
        let btn2 = document.getElementById("fur");

        // Get the <span> element that closes the modal
        let span2 = document.getElementsByClassName("close3")[0];

        let users = [

            { id: '+38(000) 000-00-00', name: "Іван", name1: "Іванович", name2: "Іванко", tel: '+38(000) 000-00-00' },

            { id: '+38(000) 000-00-01', name: "Ганна", name1: "Іванівна", name2: "Іванко", tel: '+38(000) 000-00-01' },

            { id: '+38(000) 000-00-02', name: "Петро", name1: "Петрович", name2: "Петренко", tel: '+38(000) 000-00-02' },

        ];

        function MyFn() {
            if (localStorage.getItem('data') === null) {

                localStorage.setItem("data", JSON.stringify(users));

            }

            else {

                return;

            }
        }

        MyFn();
        let res = JSON.parse(localStorage.getItem('data'));

        let q;

        // When the user clicks the button, open the modal 
        btn2.onclick = function () {

            let NumTel = document.getElementById('tel').value;
            localStorage.setItem("telephone", NumTel);

            if (q = (res.find(item => item.id === NumTel))) {

                localStorage.setItem("data", JSON.stringify(res));

            }

            else {

                let name = prompt('Введите имя');
                let name1 = prompt('Введите отчество');
                let name2 = prompt('Введите фамилию');

                let obj = {

                    id: NumTel,

                    name: name,

                    name1: name1,

                    name2: name2,

                    tel: NumTel,

                }

                res.push(obj);

                localStorage.setItem("data", JSON.stringify(res));

            }
            modal2.style.display = "block";
            modal.style.display = "none";
            function getTimeRemaining(endtime) {
                let t = Date.parse(endtime) - Date.parse(new Date());
                let seconds = Math.floor((t / 1000) % 60);
                let minutes = Math.floor((t / 1000 / 60) % 60);
                return {
                    total: t,
                    minutes: minutes,
                    seconds: seconds
                };
            }

            function initializeClock(id, endtime) {
                let clock = document.getElementById(id);
                let minutesSpan = clock.querySelector(".minutes");
                let secondsSpan = clock.querySelector(".seconds");

                function updateClock() {
                    let t = getTimeRemaining(endtime);

                    if (t.total <= 0) {
                        document.getElementById("countdown").className = "hidden";
                        document.getElementById("deadline-message").className = "visible";
                        clearInterval(timeinterval);
                        return true;
                    }


                    minutesSpan.innerHTML = ("0" + t.minutes).slice(-2);
                    secondsSpan.innerHTML = ("0" + t.seconds).slice(-2);
                }

                updateClock();
                let timeinterval = setInterval(updateClock, 1000);
            }

            let deadline = new Date(Date.parse(new Date()) + 60 * 1000);
            initializeClock("countdown", deadline);
        }

        // When the user clicks on <span> (x), close the modal
        span2.onclick = function () {
            modal2.style.display = "none";
        }
    </script>

    <script>
        let dialog = document.querySelector('dialog');
        document.querySelector('#enterModal').onclick = function () {
            dialog.showModal();
        }
        let close = document.querySelector('#closeDialog').onclick = function () {
            dialog.close();
        }
    </script>

    <script>
        document.getElementById('pay').onclick = function () {
            document.getElementById('bank').hidden = true;
        }
    </script>

    <script>
        let button = document.getElementById("enroll");
        let i;
        if (localStorage.getItem('#enroll') !== null) {
            i = Number(localStorage.getItem('#enroll'));
        }
        else {
            i = 0;
        }
        button.addEventListener('click', function (e) {
            i = i + 1;
            localStorage.setItem('#enroll', i);
        });

    </script>

    <script>
        let phone = document.querySelector('#phone');
        phone.addEventListener('input', function (event) {
            let button = document.querySelector('#furt');
            if (phone.value.length == 18) {
                button.disabled = false;
                button.style.backgroundColor = '#FFC59E';
            }
        });
        button.addEventListener('click', function (event) {
            let phone = document.querySelector('#phone');
            phone.value = '';
            this.disabled = true;
        });
    </script>

    <script>
        document.getElementById('furt').onclick = function () {
            let NumTel = document.getElementById('phone').value;
            
                localStorage.getItem('telephone');
                if (localStorage.getItem('telephone') !== String(NumTel)) {
                    i = 0;
                    localStorage.setItem('#enroll', i);
                }
              
            
            localStorage.setItem("telephone", NumTel);

            if (q = (res.find(item => item.id === NumTel))) {

                localStorage.setItem("data", JSON.stringify(res));

            }

            else {
               
                let name = prompt('Введите имя');
                let name1 = prompt('Введите отчество');
                let name2 = prompt('Введите фамилию');

                let obj = {

                    id: NumTel,

                    name: name,

                    name1: name1,

                    name2: name2,

                    tel: NumTel,

                }

                res.push(obj);

                localStorage.setItem("data", JSON.stringify(res));


            }

            let dialog = document.querySelector('dialog');
            dialog.close();
            document.getElementById('block1').style.opacity = 0;
            document.getElementById('block2').style.opacity = 1;
            document.getElementById('block2').style.zIndex = 20;
        }
    </script>

    <script>
        document.getElementById('no-reg').onclick = function () {
            let dialog = document.querySelector('dialog');
            dialog.close();
        }
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var eventCalllback = function (e) {
                var el = e.target,
                    clearVal = el.dataset.phoneClear,
                    pattern = el.dataset.phonePattern,
                    matrix_def = "+38(0__) ___-__-__",
                    matrix = pattern ? pattern : matrix_def,
                    i = 0,
                    def = matrix.replace(/\D/g, ""),
                    val = e.target.value.replace(/\D/g, "");
                if (clearVal !== 'false' && e.type === 'blur') {
                    if (val.length < matrix.match(/([\_\d])/g).length) {
                        e.target.value = '';
                        return;
                    }
                }
                if (def.length >= val.length) val = def;
                e.target.value = matrix.replace(/./g, function (a) {
                    return /[_\d]/.test(a) && i < val.length ? val.charAt(i++) : i >= val.length ? "" : a
                });
            }
            var phone_inputs = document.querySelectorAll('[data-phone-pattern]');
            for (let elem of phone_inputs) {
                for (let ev of ['input', 'blur', 'focus']) {
                    elem.addEventListener(ev, eventCalllback);
                }
            }
        });
    </script>

    <script>
        let tel = document.querySelector('#tel');

        tel.addEventListener('input', function (event) {
            let button = document.querySelector('#fur');
            if (tel.value.length == 18) {
                button.disabled = (tel.value == '');
                button.style.backgroundColor = '#FFC59E';
            }
        });
        button.addEventListener('click', function (event) {
            let tel = document.querySelector('#tel');
            tel.value = '';
            this.disabled = true
        });
    </script>

    <script>
        let bank = document.getElementById('bank');
        bank.addEventListener('input', function (event) {
            let button = document.getElementById('pay');
            button.disabled = false;
            button.style.backgroundColor = '#FFC59E';
        });
        button.addEventListener('click', function (event) {
            let bank = document.querySelector('#bank');
            bank.value = '';
            this.disabled = true;
        });
    </script>

    <script>
        if (localStorage.getItem('#city') !== null) {
            document.querySelector('#city').value = localStorage.getItem('#city');
        } else {
            document.querySelector('#city').value = `ВАШ ГОРОД`
        }
    </script>

    <script>
        let num = document.querySelector('#num');
        num.addEventListener('input', function (event) {
            let button2 = document.querySelector('#fur2');
            button2.disabled = (tel.value == '');
            button2.style.backgroundColor = '#FFC59E';
        });
        let button2 = document.querySelector('#fur2');
        button2.addEventListener('click', function (event) {
            let num = document.querySelector('#num');
            num.value = '';
            this.disabled = true
        });
    </script>

    <script>
        document.getElementById("deadline-message").onclick = function () {
            document.getElementById("myModal").style.display = "block";
            document.getElementById("myModal2").style.display = "none";
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
        </script>

</body>

</html>